{
  "schemaVersion": 2,
  "dockerfilePath": "./Dockerfile",
  "dockerComposeFile": {
    "version": "3.8",
    "services": {
      "versiona-ai": {
        "build": ".",
        "container_name": "$$cap_appname",
        "restart": "unless-stopped",
        "environment": {
          "DIRECTUS_BASE_URL": "$$cap_directus_url",
          "DIRECTUS_TOKEN": "$$cap_directus_token",
          "FLASK_PORT": "8001",
          "FLASK_ENV": "production",
          "FLASK_DEBUG": "false"
        },
        "ports": [
          "8001:8001"
        ],
        "volumes": [
          "$$cap_appname-logs:/app/logs"
        ],
        "healthcheck": {
          "test": ["CMD", "curl", "-f", "http://localhost:8001/health"],
          "interval": "30s",
          "timeout": "10s",
          "start_period": "40s",
          "retries": 3
        }
      }
    },
    "volumes": {
      "$$cap_appname-logs": {}
    }
  }
}
